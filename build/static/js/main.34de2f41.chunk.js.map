{"version":3,"sources":["grammar/components/HomeRoute/HomeRoute.module.css","grammar/components/Quiz/Quiz.module.css","shared/components/FrontRoute/FrontRoute.module.css","shared/components/Nav/Nav.module.css","grammar/components/Stats/Stats.module.css","shared/components/Footer/Footer.module.css","shared/components/Header/Header.module.css","shared/components/Loader/Loader.module.css","grammar/components/QuizRoute/QuizRoute.module.css","grammar/components/TextsRoute/TextsRoute.module.css","config.js","shared/services/User.js","grammar/services/Scores.js","grammar/components/Stats/Stats.jsx","shared/components/Nav/Nav.jsx","shared/components/Footer/Footer.jsx","shared/components/Header/Header.jsx","shared/components/FrontRoute/FrontRoute.jsx","grammar/patterns.js","grammar/components/HomeRoute/HomeRoute.jsx","shared/components/Loader/Loader.jsx","shared/services/Utils.js","grammar/services/Exercises.js","grammar/components/Question/Question.jsx","grammar/components/Quiz/Quiz.jsx","grammar/components/QuizRoute/QuizRoute.jsx","grammar/components/TextsRoute/TextsRoute.jsx","shared/components/Router/Router.jsx","index.js","grammar/components/Question/Question.module.css"],"names":["module","exports","container","home","subtitle","content","languageBlock","hero","title","singleLang","description","list","question","results","congrats","scale-up","controls","fade-in","activeQuestion","front","links","imageCenter","imageLeft","imageRight","imageTall","cta","point-down","logo","info","scores","loader","load5","config","localStorage","window","apiUrl","subject","ReplaySubject","userData","User","data","onNext","this","save","setItem","JSON","stringify","parse","getItem","code","csrf","fetch","Request","concat","mode","method","body","then","resp","json","set","restore","currentScore","Scores","newScores","length","push","apply","pop","language","patternSlug","isCorrect","started","Date","now","correctAnswers","errors","finished","updateScore","subscribe","setScores","Stats","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_this2","setTimeout","setState","weekAgo","sum","filter","score","reduce","totalPercents","Math","round","confidence","max","_this3","sub","onUpdate","dispose","_this$state","mistakes","react_default","a","createElement","displayScores","className","styles","calculateTotal","React","Component","Nav","Link","to","xmlns","viewBox","width","height","fill","x","y","rx","ry","Stats_Stats","PureComponent","Footer","Header","ga","location","pathname","search","props","children","FrontRoute","Header_Header","alt","src","patterns","English","a-vs-the","pattern","partOfSpeech","baseForm","occlusion","choices","many-vs-much","lexeme","test","each-vs-every","some-vs-any","irregular-verbs","third-person-singular","phrasal-verbs","modal-verbs","surfaceForm","prepositions-in-on-at","German","definite-article-and-adjectives","indefinite-article-and-adjectives","adjective-declension","definite-article-declension","preposition-case","verbs-with-prepositions","separable-verbal-prefixes","verb-conjugation","sein-vs-haben","personal-pronouns","possessive-pronouns-and-indefinite-article","HomeRoute","_ref","match","languages","params","keys","map","key","i","id","homeClasses","classnames","defineProperty","Loader","rnd","n","floor","random","shuffle","arr","len","j","escapeRegexp","text","replace","Exercises","arguments","undefined","clozeSymbol","Promise","resolve","every","param","value","Array","join","includes","RegExp","matches","sentences","forEach","sentence","captured","lexemes","patternPart","isLexemeMathing","cloze","assign","find","c","clozeForm","group","occluded","clozes","randomCloze","index","indexOf","next","prev","regex","originalText","getData","filterSentences","Question","selectedChoice","correct","showHint","input","onInput","onSubmit","e","preventDefault","onAnswer","target","answer","updateChoices","nextProps","rightChoice","toLowerCase","Function","slice","correctChoice","choice","selected","extraClasses","incorrectChoice","hintChoice","choiceButton","disabled","onClick","focus","_this4","_this$state2","correctAnswer","renderChoices","choicesBlock","placeholder","hint","hintAnswer","action","ref","el","name","autoFocus","size","readOnly","defaultValue","textParts","split","toUpperCase","toggle","incorrect","classes","Quiz","generator","allExercises","cachedExercises","_onAnswer","bind","assertThisInitialized","_onReloadClick","reload","currentExercises","activeExercise","generate","update","_loop","randomIndex","some","item","createExercise","splice","init","reset","_this5","maxSize","acc","questions","Question_Question","app","quiz","QuizRoute","atob","Quiz_Quiz","TextsRoute","href","Routes","BrowserRouter","Nav_Nav","Route","exact","path","component","Footer_Footer","ReactDOM","render","Router","document","querySelector","shake"],"mappings":"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","file":"static/js/main.34de2f41.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HomeRoute_container__2Ex2n\",\"home\":\"HomeRoute_home__3Xnw9\",\"subtitle\":\"HomeRoute_subtitle__1PjBj\",\"content\":\"HomeRoute_content__XGNDK\",\"languageBlock\":\"HomeRoute_languageBlock__3ui59\",\"hero\":\"HomeRoute_hero__8n5ir\",\"title\":\"HomeRoute_title__-S-qH\",\"singleLang\":\"HomeRoute_singleLang__1dKsV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Quiz_container__1q5r8\",\"description\":\"Quiz_description__4aXxi\",\"list\":\"Quiz_list__3IRWE\",\"question\":\"Quiz_question__2_8TA\",\"results\":\"Quiz_results__2E652\",\"congrats\":\"Quiz_congrats__21aG5\",\"scale-up\":\"Quiz_scale-up__2eACg\",\"controls\":\"Quiz_controls__3bFbs\",\"fade-in\":\"Quiz_fade-in__1cob3\",\"activeQuestion\":\"Quiz_activeQuestion__3fo-e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FrontRoute_container__38_lK\",\"front\":\"FrontRoute_front__3wzZC\",\"links\":\"FrontRoute_links__biw9z\",\"imageCenter\":\"FrontRoute_imageCenter__2iBpc\",\"imageLeft\":\"FrontRoute_imageLeft__1252i\",\"imageRight\":\"FrontRoute_imageRight__R9BeH\",\"imageTall\":\"FrontRoute_imageTall__37Ie2\",\"cta\":\"FrontRoute_cta__3x1hi\",\"hero\":\"FrontRoute_hero__1U7cd\",\"point-down\":\"FrontRoute_point-down__3nm5M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Nav_container__2OXIN\",\"logo\":\"Nav_logo__oNScW\",\"info\":\"Nav_info__2Dn7k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Stats_container__3cvCF\",\"scores\":\"Stats_scores__3AOYi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Footer_container__3DzVe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Header_container__28y5s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2FHDs\",\"load5\":\"Loader_load5__3mD37\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"QuizRoute_container__jamHW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TextsRoute_container__R3FGT\"};","export default {\n  apiUrl: 'https://e33zq7nat7.execute-api.eu-west-1.amazonaws.com/dev',\n  maxExercises: 10\n};\n","import { ReplaySubject } from 'rx-lite';\nimport config from '../../config';\n\nconst localStorage = window.localStorage;\nconst { apiUrl } = config;\nconst subject = new ReplaySubject(1);\n\nlet userData = null;\n\nexport default class User {\n  static subject;\n\n  static get() {\n    return userData;\n  }\n\n  static set(data) {\n    userData = data;\n    subject.onNext(userData);\n    this.save();\n  }\n\n  static save() {\n    return localStorage.setItem('user', JSON.stringify(userData));\n  }\n\n  static restore() {\n    return JSON.parse(localStorage.getItem('user'));\n  }\n\n  static requestToken(code, csrf) {\n    return fetch(new Request(`${ apiUrl }/auth`, {\n      mode: 'cors',\n      method: 'POST',\n      body: JSON.stringify({ code, csrf })\n    }))\n      .then(resp => resp.json());\n  }\n\n  static requestAppId() {\n    return fetch(new Request(`${ apiUrl }/credentials`, {\n      mode: 'cors'\n    }))\n      .then(resp => resp.json());\n  }\n\n  static updateScore(scores) {\n    if (!userData) return;\n\n    userData.scores = scores;\n\n    this.save();\n\n    return fetch(new Request(`${ apiUrl }/scores`, {\n      mode: 'cors',\n      method: 'PUT',\n      body: JSON.stringify(userData)\n    }))\n      .then(resp => resp.json());\n  }\n}\n\nUser.subject = subject;\n// Restore from the localStorage\nUser.set(User.restore());\n","import { ReplaySubject } from 'rx-lite';\nimport User from '../../shared/services/User';\nimport config from '../../config';\n\nconst subject = new ReplaySubject(1);\nconst scores = [];\nlet currentScore = null;\n\nexport default class Scores {\n  static subject;\n\n  /**\n   * @param {array} newScores\n   */\n  static setScores(newScores) {\n    scores.length = 0;\n    scores.push.apply(scores, newScores);\n    subject.onNext(scores);\n  }\n\n  static reset() {\n    if (currentScore) {\n      currentScore = null;\n      scores.pop();\n    }\n    this.subject.onNext(scores);\n  }\n\n  /**\n   * @param {string} language\n   * @param {string} patternSlug\n   * @param {boolean} isCorrect\n   */\n  static update(language, patternSlug, isCorrect) {\n    if (!currentScore) {\n      currentScore = {\n        language,\n        patternSlug,\n        started: Date.now(),\n        correctAnswers: 0,\n        errors: 0\n      };\n      scores.push(currentScore);\n    }\n\n    currentScore.correctAnswers += isCorrect ? 1 : 0;\n    currentScore.errors += isCorrect ? 0 : 1;\n\n    if (currentScore.correctAnswers === config.maxExercises) {\n      currentScore.finished = Date.now();\n      currentScore = null;\n      User.updateScore(scores);\n    }\n\n    this.subject.onNext(scores);\n  }\n}\n\nScores.subject = subject;\n\nUser.subject.subscribe(data => {\n  if (data && data.scores) {\n    Scores.setScores(data.scores);\n  }\n});\n","import React from 'react';\nimport Scores from '../../services/Scores';\nimport config from '../../../config';\nimport styles from './Stats.module.css';\n\nexport default class Stats extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      scores: null,\n      currentScore: null\n    };\n  }\n\n  onUpdate(scores) {\n    let currentScore = scores[scores.length - 1];\n\n    if (currentScore && currentScore.correctAnswers === config.maxExercises) {\n      if (currentScore === this.state.currentScore) {\n        setTimeout(() => {\n          this.setState({ currentScore: null });\n        }, 3000);\n      } else {\n        currentScore = null;\n      }\n    }\n\n    this.setState({ scores, currentScore });\n  }\n\n  calculateTotal(scores) {\n    const weekAgo = Date.now() - 7 * 24 * 60 * 60 * 1000;\n\n    const sum = scores\n      .filter(score => {\n        return score.finished >= weekAgo\n      })\n      .reduce((sum, score) => {\n        sum.correctAnswers += score.correctAnswers;\n        sum.errors += score.errors;\n        return sum;\n      }, { correctAnswers: 0, errors: 0 });\n\n    const totalPercents = Math.round(100 - (sum.errors / (sum.correctAnswers || 1)) * 100);\n    const confidence = Math.max(0, Math.round(15 - (sum.correctAnswers / 1000) * 100));\n\n    return `${ totalPercents }% (±${ confidence }%)`;\n  }\n\n  componentDidMount() {\n    this.sub = Scores.subject.subscribe(scores => {\n      this.onUpdate(scores);\n    });\n  }\n\n  componentWillUnmount() {\n    this.sub.dispose();\n  }\n\n  render() {\n    const { scores, currentScore } = this.state;\n    if (!scores || !scores.length) return null;\n\n    const mistakes = currentScore && currentScore.errors ? (\n      <small>\n        <b>Mistakes:</b> { currentScore.errors }\n      </small>\n    ) : '';\n\n    const displayScores = currentScore ? (\n      <div className={ styles.scores }>\n        <div>\n          <small><b>Correct: </b></small>\n          <span>\n            { currentScore.correctAnswers }/{ config.maxExercises }\n          </span>\n        </div>\n\n        { mistakes }\n      </div>\n    ) : (\n      <div>\n        <b>Total<small> progress</small></b>: { this.calculateTotal(scores) }\n      </div>\n    );\n\n    return (\n      <div className={ styles.container }>\n        { displayScores }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Stats from '../../../grammar/components/Stats/Stats.jsx';\nimport styles from './Nav.module.css';\n\nexport default class Nav extends React.PureComponent {\n  render() {\n    return (\n      <div className={ styles.container }>\n        <nav>\n          <div className={ styles.logo }>\n            <Link to=\"/\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 72 28\" width=\"72\" height=\"28\">\n                <g fill=\"#333\">\n                  <rect x=\"0\"  y=\"0\" width=\"20\" height=\"28\" rx=\"4\" ry=\"4\" />\n                  <rect x=\"24\" y=\"0\" width=\"20\" height=\"28\" rx=\"4\" ry=\"4\" />\n                  <rect x=\"48\" y=\"0\" width=\"20\" height=\"28\" rx=\"4\" ry=\"4\" />\n                </g>\n              </svg>\n            </Link>\n          </div>\n\n          <div className={ styles.info }>\n            <Stats />\n          </div>\n        </nav>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport styles from './Footer.module.css';\n\nexport default class Footer extends React.PureComponent {\n  render() {\n    return (\n      <div className={ styles.container }>\n        <footer>\n          <div />Fluentcards, 2017\n        </footer>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport styles from './Header.module.css';\n\nexport default class Header extends React.PureComponent {\n  componentDidMount() {\n    if (!window.ga) return;\n\n    const location = window.location;\n    window.ga('set', 'page', location.pathname + location.search);\n    window.ga('send', 'pageview');\n  }\n\n  render() {\n    return (\n      <div className={ styles.container }>\n        <header>\n          <h1>\n            { this.props.children }\n            { ' ' }\n            { this.props.title }\n          </h1>\n        </header>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../Header/Header.jsx';\nimport styles from './FrontRoute.module.css';\n\n\n/**\n * FrontRoute component\n */\nexport default () => {\n  return (\n    <div className={ styles.front }>\n      <section className={ styles.hero }>\n        <Header title=\"Fluentcards Grammar\" />\n\n        <div className={ styles.container }>\n          <p>\n            Grammar drills from books and movies\n          </p>\n\n\n          <Link to=\"/grammar\" className={ styles.cta }>\n            Get started\n          </Link>\n        </div>\n      </section>\n\n      <section>\n        <div className={ styles.container }>\n          <p>\n            <Link to=\"/grammar\">\n              <img alt=\"\" src=\"/images/grammar.png\" className={ styles.imageRight } />\n            </Link>\n\n            To become fluent in a foreign language, one must deeply internalize its grammatical patterns.\n\n            <br />\n            <br />\n\n            We dynamically generate grammar exercises from classical, sci-fi and fantasy books and movie subtitles.\n\n            <br />\n            <br />\n\n            Cement your grammar knowledge with infinite grammar drills.\n          </p>\n\n          <Link to=\"/grammar\" className={ styles.cta }>\n            Start doing exercises\n          </Link>\n        </div>\n      </section>\n    </div>\n  );\n}\n","/* eslint-disable */\nexport default {\n  English: {\n    'a-vs-the': {\n      title: 'Articles: definite vs indefinite',\n\n      description: 'Choose the right article.',\n\n      pattern: [\n        {\n          partOfSpeech: 'DET',\n          baseForm: [ 'a', 'an', 'the' ],\n          occlusion: /.+/,\n          choices: [ 'a', 'an', 'the' ]\n        }\n      ]\n    },\n\n    'many-vs-much': {\n      title: 'Quantifiers: many vs much, few vs little',\n\n      description: 'Choose the right answer.',\n\n      pattern: [\n        {\n          partOfSpeech: 'QUANT',\n          baseForm: [ 'little', 'few', 'much', 'many' ],\n          occlusion: /.+/,\n\n          choices: (lexeme) => {\n            return (/little|few/.test(lexeme.baseForm)) ?\n              [ 'little', 'few' ] :\n              [ 'much', 'many' ];\n          }\n        }\n      ]\n    },\n\n    'each-vs-every': {\n      title: 'Quantifiers: each vs every',\n\n      description: 'Choose the right answer.',\n\n      pattern: [\n        {\n          partOfSpeech: 'QUANT',\n          baseForm: [ 'each', 'every' ],\n          choices: [ 'each', 'every' ],\n          occlusion: /.+/\n        }\n      ]\n    },\n\n    'some-vs-any': {\n      title: 'Quantifiers: some vs any',\n\n      description: 'Choose the right answer.',\n\n      pattern: [\n        {\n          partOfSpeech: 'QUANT',\n          baseForm: [ 'some', 'any' ],\n          choices: [ 'some', 'any' ],\n          occlusion: /.+/\n        }\n      ]\n    },\n\n    'irregular-verbs': {\n      title: 'Verbs: irregular verbs',\n\n      description: 'Type the correct forms of the missing verbs.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'VPAST', 'VPAP' ],\n\n          occlusion: /.+/,\n\n          choices: [],\n\n          baseForm: /^(ache|be|bear|beat|become|beget|begin|bend|beseech|bet|beware|bid|bide|bind|bite|bleed|bless|blow|break|breed|bring|build|burn|burst|bust|buy|can|cast|catch|chide|choose|clad|clap|cleave|cling|clothe|come|cost|creep|crow|cut|dare|deal|dig|dive|do|dow|drag|draw|dream|dress|drink|drive|dwell|earn|eat|fall|feed|feel|fight|find|fit|flee|fling|fly|forbid|forget|forlese|forsake|freeze|get|gild|gird|give|go|grind|grow|hang|have|hear|heave|help|hew|hide|hit|hoist|hold|hurt|keep|ken|kneel|knit|know|lade|laugh|lay|lead|lean|leap|learn|leave|lend|let|lie|light|lose|make|may|mean|meet|melt|mix|mow|must|ought|pay|pen|plead|prove|put|quit|reach|read|rend|rid|ride|ring|rise|rive|run|saw|say|see|seek|seethe|sell|send|set|sew|shake|shall|shape|shave|shear|shed|shine|shit|shoe|shoot|show|shrink|shut|sing|sink|sit|slay|sleep|slide|sling|slink|slip|slit|smell|smite|sneak|sow|speak|speed|spell|spend|spill|spin|spit|split|spoil|spread|sprenge|spring|stand|starve|stave|stay|steal|stick|sting|stink|stretch|strew|stride|strike|string|strip|strive|swear|sweat|sweep|swell|swim|swing|take|teach|tear|tell|think|thrive|throw|thrust|tread|vex|wake|wax|wear|weave|wed|weep|wend|wet|will|win|wind|work|wreak|wring|write|writhe|zinc)$/\n        }\n      ]\n    },\n\n    'third-person-singular': {\n      title: 'Verbs: third person singular',\n\n      description: 'Insert the verbal ending \"-s\" where necessary.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'PRON', 'PRONONE', 'PROP', 'NOUN' ]\n        },\n        {\n          partOfSpeech: [ 'VPRES' ],\n          baseForm: /^((?!be|have|go).)/,\n          occlusion: /s$/,\n          choices: [ '', 's' ]\n        }\n      ]\n    },\n\n    'phrasal-verbs': {\n      title: 'Verbs: phrasal verbs',\n\n      description: 'Complete the phrasal verbs with the correct preposisions.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'VPRES', 'VPAST', 'VPAP' ],\n          baseForm: [\n            'give', 'get', 'put', 'look', 'turn', 'break',\n            'call', 'go', 'make', 'do', 'bring', 'cut', 'drop',\n            'keep', 'run', 'set'\n          ]\n        },\n        {\n          partOfSpeech: 'PREP',\n          baseForm: [\n            'out', 'up', 'down', 'back', 'on', 'off', 'for', 'over', 'away', 'after'\n          ],\n          occlusion: /.+/\n        }\n      ]\n    },\n\n    'modal-verbs': {\n      title: 'Verbs: modal verbs',\n\n      description: 'Choose the most suitable modal verb.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'VAUX' ],\n          surfaceForm: /^((?!will|'ll|'d).)/,\n          occlusion: /.+/\n        }\n      ]\n    },\n\n    'prepositions-in-on-at': {\n      title: 'Prepositions: in, on, at',\n\n      description: 'Choose the right preposition.',\n\n      pattern: [\n        {\n          partOfSpeech: 'PREP',\n          baseForm: [ 'in', 'on', 'at' ],\n          occlusion: /.+/,\n          choices: [ 'in', 'on', 'at' ]\n        }\n      ]\n    }\n  },\n\n  German: {\n    'definite-article-and-adjectives': {\n      title: 'Adjectives: weak declension',\n\n      description: 'Choose the right ending of the adjectives that go after a definite article.',\n\n      pattern: [\n        {\n          partOfSpeech: 'ART',\n          baseForm: /^((?!ein).)/\n        },\n\n        {\n          partOfSpeech: [ 'ADJA', 'ADJA2', 'ADJA3' ],\n          surfaceForm: /.{4,}/,\n          occlusion: /e[nrs]?$/,\n          choices: [ 'e', 'en', 'er', 'es' ]\n        },\n\n        {\n          partOfSpeech: 'NOUN'\n        }\n      ]\n    },\n\n    'indefinite-article-and-adjectives': {\n      title: 'Adjectives: mixed declension',\n\n      description: 'Choose the right ending of the adjectives that go after an idefinite article, \"kein\" or a possessive pronoun (\"mein\", \"sein\" etc).',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'ART', 'INDDET', 'POSDET' ],\n          baseForm: /^((?!der|die|das).)/\n        },\n\n        {\n          partOfSpeech: [ 'ADJA', 'ADJA2', 'ADJA3' ],\n          surfaceForm: /.{4,}/,\n          occlusion: /(e[mnrs]?)?$/,\n          choices: [ 'e', 'en', 'er', 'es', 'em', '' ]\n        },\n\n        {\n          partOfSpeech: 'NOUN'\n        }\n      ]\n    },\n\n    'adjective-declension': {\n      title: 'Adjectives: weak, mixed and strong declensions',\n\n      description: 'Choose the correct endings of adjectives.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'ADJA', 'ADJA2', 'ADJA3' ],\n          surfaceForm: /.{4,}/,\n          occlusion: /(e[mnrs]?)?$/,\n          choices: [ 'e', 'en', 'er', 'es', 'em', '' ]\n        },\n\n        {\n          partOfSpeech: 'NOUN'\n        }\n      ]\n    },\n\n    'definite-article-declension': {\n      title: 'Articles: definite articles',\n\n      description: 'Put the articles into correct form.',\n\n      pattern: [\n        {\n          partOfSpeech: 'ART',\n          baseForm: /^((?!ein).)/,\n          occlusion: /.+/,\n          choices: [ 'der', 'die', 'das', 'des', 'den', 'dem' ]\n        }\n      ]\n    },\n\n    'preposition-case': {\n      title: 'Prepositional cases',\n\n      description: 'Choose the right form of an article after a preposition',\n\n      pattern: [\n        {\n          partOfSpeech: 'PREP'\n        },\n        {\n          partOfSpeech: 'ART',\n          occlusion: /[^d]+$/,\n          choices: [ 'er', 'ie', 'as', 'es', 'en', 'em' ]\n        }\n      ]\n    },\n\n\n    'verbs-with-prepositions': {\n      title: 'Verbs: prepositional government',\n\n      description: 'Choose the preposision that is required by a verb.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'VVFIN', 'VVINF' ]\n        },\n\n        {\n          partOfSpeech: [ 'PREP', 'PREPART' ],\n          occlusion: /.+/,\n          baseForm: /^((?!da).)/,\n          choices: [\n            'an', 'auf', 'aus', 'bei', 'für', 'gegen', 'in', 'mit', 'nach', 'um', 'von', 'vor', 'über', 'zu', 'zurück', 'zusammen'\n          ]\n        }\n      ]\n    },\n\n    'modal-verbs': {\n      title: 'Verbs: modal verbs',\n\n      description: 'Choose the most suitable modal verb.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'VMFIN', 'VMINF', 'VMPP' ],\n          occlusion: /.+/\n        }\n      ]\n    },\n\n    'separable-verbal-prefixes': {\n      title: 'Verbs: separable prefixes',\n\n      description: 'Choose the right separated verbal prefix.',\n\n      pattern: [\n        {\n          partOfSpeech: 'VPREF',\n          baseForm: /^((?!da).)/,\n          occlusion: /.+/,\n          choices: [\n            'ab', 'an', 'auf', 'aus', 'raus', 'ein', 'hin', 'hinzu', 'los', 'mit', 'vor', 'weg', 'zurück',\n            'durch', 'über', 'rüber', 'um', 'unter', 'wider'\n          ]\n        },\n        {\n          partOfSpeech: [ 'SENT', 'CM' ]\n        }\n      ]\n    },\n\n    'verb-conjugation': {\n      title: 'Verbs: conjugation',\n\n      description: 'Type the correct forms of the verbs.',\n\n      pattern: [\n        {\n          partOfSpeech: 'VVFIN',\n          occlusion: /.+/,\n          choices: []\n        }\n      ]\n    },\n\n    'sein-vs-haben': {\n      title: 'Verbs: sein vs haben',\n\n      description: 'Choose between \"sein\" and \"haben\" to form the Perfect tense.',\n\n      pattern: [\n        {\n          partOfSpeech: 'VAFIN',\n          surfaceForm: /^(bin|bist|ist|seid|sind|habe|hast|hat|habt|haben)$/,\n          occlusion: /.+/\n        },\n        {\n          partOfSpeech: /./\n        },\n        {\n          partOfSpeech: /./\n        },\n        {\n          partOfSpeech: 'VVPP'\n        }\n      ]\n    },\n\n    'personal-pronouns': {\n      title: 'Pronouns: personal',\n\n      description: 'Put the personal pronouns into the right form.',\n\n      pattern: [\n        {\n          partOfSpeech: [ 'PERSPRO' ],\n          surfaceForm: /^(mich|mir|dich|dir|ihn|ihm|ihr|uns|euch|ihnen)$/i,\n          occlusion: /.+/,\n\n          choices: (lexeme) => {\n            switch (lexeme.baseForm) {\n                case 'ich': return [ 'ich', 'mich', 'mir' ];\n                case 'du': return [ 'du', 'dich', 'dir' ];\n                case 'es': return [ 'es', 'ihm' ];\n                case 'er': return [ 'er', 'ihn', 'ihm' ];\n                case 'sie': return [ 'sie', 'ihr', 'ihnen' ];\n                case 'wir': return [ 'wir', 'uns' ];\n                case 'ihr': return [ 'ihr', 'euch' ];\n            }\n          }\n        }\n      ]\n    },\n\n    'possessive-pronouns-and-indefinite-article': {\n      title: 'Pronouns: possessive',\n\n      description: 'Choose the correct form of the possessive pronouns.',\n\n      pattern: [\n        {\n          partOfSpeech: 'POSDET',\n          occlusion: /(e[mnrs]?)$/,\n          choices: [ 'e', 'em', 'en', 'er', 'es' ]\n        }\n      ]\n    }\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport classnames from 'classnames';\nimport patterns from '../../patterns';\nimport Header from '../../../shared/components/Header/Header.jsx';\nimport styles from './HomeRoute.module.css';\n\nexport default ({ match }) => {\n  const languages = match.params.language ?\n    [ match.params.language ] :\n    Object.keys(patterns);\n\n  const title = match.params.language ? '' : (\n    <div className={ styles.title }>\n      <span>Fluentcards Grammar</span>\n      <span className={ styles.subtitle }>drills from books and subtitles</span>\n    </div>\n  );\n\n  const language = match.params.language ? (\n    <span>\n      <Link to=\"/grammar\">All languages</Link>\n      { ' › ' }\n      { match.params.language }\n    </span>\n  ) : '';\n\n  const content = languages.map(language => {\n    const links = Object.keys(patterns[language]).map((key, i) => (\n      <li key={ i }>\n        <Link to={ `/grammar/quiz/${ language }/${ key }` }>{ patterns[language][key].title }</Link>\n      </li>\n    ));\n\n    return (\n      <div className={ styles.languageBlock } key={ language } id={ language }>\n        <h2>\n          <Link to={ `/grammar/quiz/${ language }` }><h2>{ language }</h2></Link>\n        </h2>\n\n        <ul>{ links }</ul>\n      </div>\n    );\n  });\n\n  const homeClasses = classnames(styles.home, {\n    [styles.singleLang]: match.params.language\n  });\n\n  return (\n    <div className={ homeClasses }>\n      <section>\n        <Header title={ title }>{ language }</Header>\n      </section>\n\n      <section>\n        <div className={ styles.container }>\n          <div className={ styles.content }>\n            { content }\n          </div>\n        </div>\n      </section>\n\n      <section>\n        <div className={ styles.container }>\n          <h1 className={ styles.hero }>\n            Refresh any quiz page to load new exercises!\n          </h1>\n\n          <p>All <Link to=\"/grammar/texts\">texts</Link> used here are transformed and mixed for educational purposes under the Fair Use.</p>\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React from 'react';\nimport styles from './Loader.module.css';\n\nexport default () => <div className={ styles.loader }></div>;\n","function rnd(n) {\n  return Math.floor(Math.random() * n);\n}\n\nexport function shuffle(arr) {\n  const len = arr.length;\n  for (let i = len - 1; i >= 0; i--) {\n    let j = rnd(len);\n    [ arr[i], arr[j] ] = [ arr[j], arr[i] ];\n  }\n  return arr;\n}\n\nexport function randomItem(arr) {\n  return arr[rnd(arr.length)];\n}\n\nexport function escapeRegexp(text) {\n  return text\n    .replace(/\\]/g, '\\\\]')\n    .replace(/\\^/g, '\\\\^')\n    .replace(/-/g, '\\\\-')\n    .replace(/./g, '[$&]')\n}\n","import { randomItem, escapeRegexp } from '../../shared/services/Utils';\n\nexport default class Exercises {\n  constructor(language = 'English') {\n    this.clozeSymbol = '⧼…⧽';\n    this.language = language;\n    this.data = null;\n  }\n\n  getData() {\n    if (this.data) return Promise.resolve(this.data);\n\n    return fetch(`/data/${ this.language }/tagged.json`)\n      .then(resp => resp.json());\n  }\n\n  isLexemeMathing(lexeme, pattern) {\n    const check = (param) => {\n      let value = lexeme[param];\n      if (value instanceof Array) value = value.join('');\n\n      return !pattern[param] ||\n        (pattern[param] === value) ||\n        (pattern[param] instanceof Array && pattern[param].includes(value)) ||\n        (pattern[param] instanceof RegExp && pattern[param].test(value));\n    };\n\n    return [ 'partOfSpeech', 'baseForm', 'surfaceForm' ].every(check);\n  }\n\n  filterSentences(data, pattern) {\n    const matches = [];\n\n    data.sentences.forEach(sentence => {\n      let captured = [];\n\n      sentence.lexemes.forEach(lexeme => {\n        const patternPart = pattern[captured.length];\n\n        if (this.isLexemeMathing(lexeme, patternPart)) {\n          // Continue matching\n          captured.push({ lexeme, patternPart });\n        } else {\n          // Reset matching\n          captured = [];\n        }\n\n        if (captured.length === pattern.length) {\n          matches.push({ sentence, captured });\n          captured = [];\n        }\n      });\n    });\n\n    return matches;\n  }\n\n  createExercise(match) {\n    let text = match.sentence.text;\n\n    const lexemes = match.sentence.lexemes.map(lexeme => {\n      const cloze = Object.assign({}, lexeme);\n      const captured = match.captured.find(c => c.lexeme === lexeme);\n\n      if (captured && captured.patternPart.occlusion) {\n        cloze.clozeForm = lexeme.surfaceForm.replace(captured.patternPart.occlusion, group => {\n          cloze.occluded = group;\n          return this.clozeSymbol;\n        });\n\n        if (cloze.occluded == null) {\n          cloze.occluded = '';\n          cloze.clozeForm = cloze.surfaceForm + this.clozeSymbol;\n        }\n\n        cloze.choices = captured.patternPart.choices;\n      }\n\n      return cloze;\n    });\n\n    const clozes = lexemes.filter(lexeme => lexeme.occluded != null);\n    const randomCloze = randomItem(clozes);\n    const index = lexemes.indexOf(randomCloze);\n    const next = lexemes[index + 1];\n    const prev = lexemes[index - 1];\n\n    const regex = new RegExp(\n      (prev ? `(${ escapeRegexp(prev.surfaceForm) }\\\\s*)` : '(^)') +\n      escapeRegexp(randomCloze.surfaceForm) +\n      (next ? `(?=\\\\s*${ escapeRegexp(next.surfaceForm) })` : '$')\n    );\n    text = text.replace(regex, '$1' + randomCloze.clozeForm);\n\n    return {\n      text,\n      originalText: match.sentence.text,\n      cloze: randomCloze\n    };\n  }\n\n  generate(pattern) {\n    return this.getData()\n      .then(data => this.filterSentences(data, pattern));\n  }\n}\n","import React from 'react';\nimport classnames from 'classnames';\nimport { shuffle } from '../../../shared/services/Utils';\nimport styles from './Question.module.css';\n\n\nexport default class Question extends React.PureComponent {\n  constructor() {\n    super();\n\n    this.state = {\n      choices: null,\n      selectedChoice: null,\n      correct: null,\n      showHint: false\n    };\n\n    this.input = null;\n\n    this.onInput = () => {\n      if (this.state.correct === false) {\n        this.setState({ correct: null });\n      }\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      this.onAnswer(e.target.answer.value);\n    };\n  }\n\n  componentWillMount() {\n    this.updateChoices(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.text !== this.props.text) {\n      this.updateChoices(nextProps);\n    }\n  }\n\n  updateChoices(props) {\n    const maxChoices = 4;\n    const rightChoice = props.cloze.occluded.toLowerCase();\n    let choices = props.cloze.choices || props.choices;\n\n    if (choices instanceof Function) {\n      choices = choices(props.cloze);\n    }\n\n    choices = shuffle(choices.slice()).slice(0, maxChoices);\n\n    if (!choices.map(c => c.toLowerCase()).includes(rightChoice)) {\n      if (choices.length < maxChoices) {\n        choices.push(rightChoice);\n        choices = shuffle(choices);\n      } else {\n        choices[Math.floor(choices.length * Math.random())] = rightChoice;\n      }\n    }\n\n    this.setState({\n      choices,\n      correct: null,\n      selectedChoice: null,\n      showHint: false\n    });\n  }\n\n  onAnswer(value) {\n    const lexeme = this.props.cloze;\n    const correct = lexeme.occluded.toLowerCase() === value.toLowerCase();\n\n    this.setState({ correct, selectedChoice: value });\n\n    this.props.onAnswer(correct, lexeme);\n\n    !correct && setTimeout(() => {\n      this.setState({ showHint: true });\n    }, 600)\n  }\n\n  renderChoices() {\n    const { choices, correct, showHint } = this.state;\n\n    if (!choices || choices.length <= 1) return null;\n\n    const correctChoice = this.props.cloze.occluded;\n\n    return choices.map((choice, i) => {\n      const selected = this.state.selectedChoice === choice;\n\n      const extraClasses = {};\n      extraClasses[styles.selectedChoice] = selected;\n      extraClasses[styles.correctChoice] = selected && correct;\n      extraClasses[styles.incorrectChoice] = selected && !correct;\n      extraClasses[styles.hintChoice] = showHint && choice === correctChoice;\n\n      return (\n        <li key={ i }>\n          <button\n            className={ classnames(styles.choiceButton, extraClasses) }\n            disabled={ this.state.selectedChoice != null }\n            onClick={ () => this.onAnswer(choice) }>\n            { choice || '∅' }\n          </button>\n        </li>\n      );\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.input) {\n      this.input.focus();\n    }\n  }\n\n  render() {\n    const { cloze } = this.props;\n    const { correct, showHint } = this.state;\n\n    const correctAnswer = this.props.cloze.occluded;\n    const choices = this.renderChoices();\n\n    const choicesBlock = choices ? (\n      <ol className={ styles.choices }>\n        { choices }\n      </ol>\n    ) : '';\n\n    const placeholder = choices ? '…' :\n      (cloze.baseForm.join ? cloze.baseForm.join('') : cloze.baseForm);\n\n    const hint = showHint && !choices ? (\n      <span className={ styles.hintAnswer }>{ correctAnswer }</span>\n    ) : null;\n\n    const input = (\n      <form action=\"#\" onSubmit={ this.onSubmit }>\n        { hint }\n        <input\n          ref={ el => this.input = el }\n          name=\"answer\"\n          autoFocus\n          disabled={ correct === false }\n          placeholder={ placeholder }\n          size={ this.props.size + 1 }\n          readOnly={ correct }\n          onInput={ this.onInput }\n          defaultValue={ (correct || (showHint && choices)) ? correctAnswer : null } />\n      </form>\n    );\n\n    const textParts = this.props.text.split(this.props.clozeSymbol, 2);\n    textParts[0] = textParts[0].slice(0, 1).toUpperCase() + textParts[0].slice(1);\n\n    const toggle = {};\n    toggle[styles.correct] = correct === true;\n    toggle[styles.incorrect] = correct === false;\n    const classes = classnames(styles.container, toggle);\n\n    return (\n      <div className={ classes }>\n        <div className={ styles.question }>\n          { textParts[0] }\n          { input }\n          { textParts[1] }\n        </div>\n\n        { choicesBlock }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport classnames from 'classnames';\nimport Loader from '../../../shared/components/Loader/Loader.jsx';\nimport Exercises from '../../services/Exercises';\nimport Scores from '../../services/Scores';\nimport Question from '../Question/Question.jsx';\nimport config from '../../../config';\nimport styles from './Quiz.module.css';\n\nexport default class Quiz extends React.PureComponent {\n  constructor() {\n    super();\n\n    this.generator = null;\n    this.allExercises = null;\n    this.cachedExercises = null;\n\n    this._onAnswer = this.onAnswer.bind(this);\n    this._onReloadClick = this.reload.bind(this);\n\n    this.state = {\n      currentExercises: [],\n      activeExercise: 0\n    };\n  }\n\n  init() {\n    this.generator = new Exercises(this.props.language);\n\n    this.generator.generate(this.props.pattern)\n      .then(allExercises => {\n        this.cachedExercises = allExercises;\n        this.allExercises = allExercises.slice();\n        this.reload();\n      });\n  }\n\n  onAnswer(correct) {\n    Scores.update(\n      this.props.language,\n      this.props.patternSlug,\n      correct\n    );\n\n    // Switch the active exercise\n    const { activeExercise } = this.state;\n    setTimeout(() => {\n      this.setState({ activeExercise: activeExercise + 1 });\n    }, correct ? 600 : 3000);\n  }\n\n  reload() {\n    this.setState({\n      currentExercises: [],\n      activeExercise: 0\n    });\n\n    const currentExercises = [];\n    const maxTries = 100;\n\n    for (let i = 0; i < maxTries && currentExercises.length < config.maxExercises; i++) {\n      const randomIndex = Math.floor(Math.random() * this.allExercises.length);\n      const match = this.allExercises[randomIndex];\n      if (!currentExercises.some(item => item.originalText === match.sentence.text)) {\n        currentExercises.push(this.generator.createExercise(match));\n        this.allExercises.splice(randomIndex, 1);\n\n        if (this.allExercises.length < config.maxExercises - currentExercises.length) {\n          this.allExercises = this.cachedExercises.slice();\n        }\n      }\n    }\n\n    // Delay the rendering to display the loading animation\n    setTimeout(() => {\n      this.setState({ currentExercises });\n    }, 100);\n  }\n\n  componentWillMount() {\n    this.init();\n  }\n\n  componentWillUnmount() {\n    Scores.reset();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.pattern !== nextProps.pattern) {\n      this.init();\n    }\n  }\n\n  render() {\n    const { currentExercises, activeExercise } = this.state;\n\n    const maxSize = currentExercises.reduce((max, item) => {\n      return Math.max(max, item.cloze.occluded.length);\n    }, 1);\n\n    const choices = currentExercises.reduce((acc, item) => {\n      const choice = item.cloze.occluded.toLowerCase();\n      if (!acc.includes(choice)) acc.push(choice);\n      return acc;\n    }, []);\n\n    const questions = currentExercises.map((item, i) => {\n      const classes = classnames(styles.question, {\n        [styles.activeQuestion]: i === activeExercise\n      });\n\n      return (\n        <li key={ i } className={ classes }>\n          <Question\n            cloze={ item.cloze }\n            text={ item.text }\n            size={ maxSize }\n            choices={ choices }\n            clozeSymbol={ this.generator.clozeSymbol }\n            onAnswer={ this._onAnswer }\n            />\n        </li>\n      );\n    });\n\n    const app = activeExercise === currentExercises.length ? (\n      <div className={ styles.results }>\n        <p className={ styles.congrats }>\n          Great job!\n        </p>\n\n        <div className={ styles.controls }>\n          <button onClick={ this._onReloadClick }>Load new exercises</button>\n        </div>\n\n        <div>\n          <i>or</i>\n          <p>\n            <Link to={ `/grammar/quiz/${ this.props.language }` }>Choose another exercise</Link>\n          </p>\n        </div>\n      </div>\n    ) : (\n      <div>\n        <p className={ styles.description }>\n          { this.props.description }\n        </p>\n\n        <ol className={ styles.list }>\n          { questions }\n        </ol>\n      </div>\n    );\n\n    const quiz = currentExercises.length ? app : (\n      <Loader />\n    );\n\n    return (\n      <div className={ styles.container }>\n        { quiz }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../../../shared/components/Header/Header.jsx';\nimport patterns from '../../patterns';\nimport Quiz from '../Quiz/Quiz.jsx';\nimport styles from './QuizRoute.module.css';\n\nexport default ({ match }) => {\n  let pattern = patterns[match.params.language][match.params.pattern];\n\n  if (!pattern) {\n    try {\n      pattern = JSON.parse(atob(match.params.pattern));\n    } catch (e) {\n      return null;\n    }\n    pattern.pattern.forEach(patternPart => {\n      Object.keys(patternPart).forEach(key => {\n        if ('choices' !== key) {\n          patternPart[key] = new RegExp(patternPart[key]);\n        }\n      });\n    });\n    if (!pattern.pattern.some(patternPart => patternPart.occlusion)) {\n      pattern.pattern[0].occlusion = /.+/;\n    }\n  }\n\n  return (\n    <div>\n      <Header title={ pattern.title }>\n        <Link to={ `/grammar/quiz/${ match.params.language }` }>{ match.params.language }</Link>\n        { ' › ' }\n      </Header>\n\n      <div className={ styles.container }>\n        <Quiz\n          language={ match.params.language }\n          description={ pattern.description }\n          pattern={ pattern.pattern }\n          patternSlug={ match.params.pattern }\n          />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../../../shared/components/Header/Header.jsx';\nimport styles from './TextsRoute.module.css';\n\nexport default () => (\n  <div>\n    <Header title=\"\">\n      <Link to=\"/grammar\">Fluentcards Grammar</Link>\n    </Header>\n\n    <div className={ styles.container }>\n      <h2>Source texts</h2>\n\n      <p>The following texts have been used to create the grammar exercises:</p>\n\n      <ul>\n        <li>\n          Brüder Grimm,\n          <span> </span>\n          <a href=\"http://gutenberg.spiegel.de/buch/die-schonsten-kinder-und-hausmarchen-6248/1\">\n            Die schönsten Kinder- und Hausmärchen\n          </a>\n        </li>\n\n        <li>\n          Johanna Spyri,\n          <span> </span>\n          <a href=\"http://gutenberg.spiegel.de/buch/heidis-lehr-und-wanderjahre-5611/1\">\n            Heidis Lehr- und Wanderjahre\n          </a>\n        </li>\n\n        <li>\n          Franz Kafka,\n          <span> </span>\n          <a href=\"http://gutenberg.spiegel.de/buch/franz-kafka-erz-161/1\">26 Erzählungen</a>\n        </li>\n\n        <li>\n          H. G. Wells,\n          <span> </span>\n          <a href=\"https://www.gutenberg.org/ebooks/35\">\n            The Time Machine\n          </a>\n        </li>\n\n        <li>\n          The subtitles for “The Avengers” (2003) from Opensubtitles.org\n        </li>\n\n        <li>\n          The subtitles for “The Guardians of the Galaxy” (2014) from Opensubtitles.org\n        </li>\n      </ul>\n    </div>\n  </div>\n);\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport Nav from '../Nav/Nav.jsx';\nimport Footer from '../Footer/Footer.jsx';\n\n// Front\nimport FrontRoute from '../../../shared/components/FrontRoute/FrontRoute.jsx';\n\n// Grammar\nimport HomeRoute from '../../../grammar/components/HomeRoute/HomeRoute.jsx';\nimport QuizRoute from '../../../grammar/components/QuizRoute/QuizRoute.jsx';\nimport TextsRoute from '../../../grammar/components/TextsRoute/TextsRoute.jsx';\n//import EditorRoute from '../../../grammar/components/EditorRoute/EditorRoute.jsx';\n//<Route exact path=\"/editor\" component={ EditorRoute } />\n\nimport './Router.module.css';\n\nconst Routes = () => (\n  <Router>\n    <div>\n      <Nav />\n\n      <Route exact path=\"/\" component={ FrontRoute } />\n\n      <Route exact path=\"/grammar\" component={ HomeRoute } />\n      <Route exact path=\"/grammar/texts\" component={ TextsRoute } />\n      <Route exact path=\"/grammar/quiz/:language\" component={ HomeRoute } />\n      <Route path=\"/grammar/quiz/:language/:pattern\" component={ QuizRoute } />\n\n      <Footer />\n    </div>\n  </Router>\n);\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Router from './shared/components/Router/Router.jsx';\n\nReactDOM.render(\n  React.createElement(Router),\n  document.querySelector('#app-root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Question_container__306_4\",\"fade-in\":\"Question_fade-in__2soT7\",\"correct\":\"Question_correct__30U5R\",\"incorrect\":\"Question_incorrect__v_YsN\",\"shake\":\"Question_shake__1GNR-\",\"question\":\"Question_question__2Sro2\",\"choices\":\"Question_choices__1H9BH\",\"choiceButton\":\"Question_choiceButton__2GIex\",\"selectedChoice\":\"Question_selectedChoice__17cTy\",\"correctChoice\":\"Question_correctChoice__8b1Yn\",\"hintChoice\":\"Question_hintChoice__1yYr9\",\"incorrectChoice\":\"Question_incorrectChoice__3pRUh\"};"],"sourceRoot":""}