(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports={container:"HomeRoute_container__2Ex2n",home:"HomeRoute_home__3Xnw9",subtitle:"HomeRoute_subtitle__1PjBj",content:"HomeRoute_content__XGNDK",languageBlock:"HomeRoute_languageBlock__3ui59",hero:"HomeRoute_hero__8n5ir",title:"HomeRoute_title__-S-qH",singleLang:"HomeRoute_singleLang__1dKsV"}},12:function(e,t,n){e.exports={container:"Quiz_container__1q5r8",description:"Quiz_description__4aXxi",list:"Quiz_list__3IRWE",question:"Quiz_question__2_8TA",results:"Quiz_results__2E652",congrats:"Quiz_congrats__21aG5","scale-up":"Quiz_scale-up__2eACg",controls:"Quiz_controls__3bFbs","fade-in":"Quiz_fade-in__1cob3",activeQuestion:"Quiz_activeQuestion__3fo-e"}},13:function(e,t,n){e.exports={container:"FrontRoute_container__38_lK",front:"FrontRoute_front__3wzZC",links:"FrontRoute_links__biw9z",imageCenter:"FrontRoute_imageCenter__2iBpc",imageLeft:"FrontRoute_imageLeft__1252i",imageRight:"FrontRoute_imageRight__R9BeH",imageTall:"FrontRoute_imageTall__37Ie2",cta:"FrontRoute_cta__3x1hi",hero:"FrontRoute_hero__1U7cd","point-down":"FrontRoute_point-down__3nm5M"}},20:function(e,t,n){e.exports={container:"Nav_container__2OXIN",logo:"Nav_logo__oNScW",info:"Nav_info__2Dn7k"}},21:function(e,t,n){e.exports={container:"Stats_container__3cvCF",scores:"Stats_scores__3AOYi"}},25:function(e,t,n){e.exports={container:"Footer_container__3DzVe"}},26:function(e,t,n){e.exports={container:"Header_container__28y5s"}},27:function(e,t,n){e.exports={loader:"Loader_loader__2FHDs",load5:"Loader_load5__3mD37"}},28:function(e,t,n){e.exports={container:"QuizRoute_container__jamHW"}},29:function(e,t,n){e.exports={container:"TextsRoute_container__R3FGT"}},31:function(e,t,n){e.exports=n(56)},52:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),s=n.n(c),o=n(59),i=n(58),l=n(2),u=n(3),h=n(6),m=n(5),p=n(7),d=n(57),f=n(17),g="https://e33zq7nat7.execute-api.eu-west-1.amazonaws.com/dev",v=10,b=window.localStorage,E=g,_=new f.ReplaySubject(1),w=null,y=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"get",value:function(){return w}},{key:"set",value:function(e){w=e,_.onNext(w),this.save()}},{key:"save",value:function(){return b.setItem("user",JSON.stringify(w))}},{key:"restore",value:function(){return JSON.parse(b.getItem("user"))}},{key:"requestToken",value:function(e,t){return fetch(new Request("".concat(E,"/auth"),{mode:"cors",method:"POST",body:JSON.stringify({code:e,csrf:t})})).then(function(e){return e.json()})}},{key:"requestAppId",value:function(){return fetch(new Request("".concat(E,"/credentials"),{mode:"cors"})).then(function(e){return e.json()})}},{key:"updateScore",value:function(e){if(w)return w.scores=e,this.save(),fetch(new Request("".concat(E,"/scores"),{mode:"cors",method:"PUT",body:JSON.stringify(w)})).then(function(e){return e.json()})}}]),e}();y.subject=_,y.set(y.restore());var k=new f.ReplaySubject(1),O=[],x=null,S=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"setScores",value:function(e){O.length=0,O.push.apply(O,e),k.onNext(O)}},{key:"reset",value:function(){x&&(x=null,O.pop()),this.subject.onNext(O)}},{key:"update",value:function(e,t,n){x||(x={language:e,patternSlug:t,started:Date.now(),correctAnswers:0,errors:0},O.push(x)),x.correctAnswers+=n?1:0,x.errors+=n?0:1,x.correctAnswers===v&&(x.finished=Date.now(),x=null,y.updateScore(O)),this.subject.onNext(O)}}]),e}();S.subject=k,y.subject.subscribe(function(e){e&&e.scores&&S.setScores(e.scores)});var j=n(21),N=n.n(j),A=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={scores:null,currentScore:null},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onUpdate",value:function(e){var t=this,n=e[e.length-1];n&&n.correctAnswers===v&&(n===this.state.currentScore?setTimeout(function(){t.setState({currentScore:null})},3e3):n=null),this.setState({scores:e,currentScore:n})}},{key:"calculateTotal",value:function(e){var t=Date.now()-6048e5,n=e.filter(function(e){return e.finished>=t}).reduce(function(e,t){return e.correctAnswers+=t.correctAnswers,e.errors+=t.errors,e},{correctAnswers:0,errors:0}),a=Math.round(100-n.errors/(n.correctAnswers||1)*100),r=Math.max(0,Math.round(15-n.correctAnswers/1e3*100));return"".concat(a,"% (\xb1").concat(r,"%)")}},{key:"componentDidMount",value:function(){var e=this;this.sub=S.subject.subscribe(function(t){e.onUpdate(t)})}},{key:"componentWillUnmount",value:function(){this.sub.dispose()}},{key:"render",value:function(){var e=this.state,t=e.scores,n=e.currentScore;if(!t||!t.length)return null;var a=n&&n.errors?r.a.createElement("small",null,r.a.createElement("b",null,"Mistakes:")," ",n.errors):"",c=n?r.a.createElement("div",{className:N.a.scores},r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("b",null,"Correct: ")),r.a.createElement("span",null,n.correctAnswers,"/",v)),a):r.a.createElement("div",null,r.a.createElement("b",null,"Total",r.a.createElement("small",null," progress")),": ",this.calculateTotal(t));return r.a.createElement("div",{className:N.a.container},c)}}]),t}(r.a.Component),F=n(20),C=n.n(F),R=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:C.a.container},r.a.createElement("nav",null,r.a.createElement("div",{className:C.a.logo},r.a.createElement(d.a,{to:"/"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 28",width:"72",height:"28"},r.a.createElement("g",{fill:"#333"},r.a.createElement("rect",{x:"0",y:"0",width:"20",height:"28",rx:"4",ry:"4"}),r.a.createElement("rect",{x:"24",y:"0",width:"20",height:"28",rx:"4",ry:"4"}),r.a.createElement("rect",{x:"48",y:"0",width:"20",height:"28",rx:"4",ry:"4"}))))),r.a.createElement("div",{className:C.a.info},r.a.createElement(A,null))))}}]),t}(r.a.PureComponent),z=n(25),P=n.n(z),T=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:P.a.container},r.a.createElement("footer",null,r.a.createElement("div",null),"Fluentcards, 2017"))}}]),t}(r.a.PureComponent),Q=n(26),V=n.n(Q),D=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(window.ga){var e=window.location;window.ga("set","page",e.pathname+e.search),window.ga("send","pageview")}}},{key:"render",value:function(){return r.a.createElement("div",{className:V.a.container},r.a.createElement("header",null,r.a.createElement("h1",null,this.props.children," ",this.props.title)))}}]),t}(r.a.PureComponent),q=n(13),H=n.n(q),M=function(){return r.a.createElement("div",{className:H.a.front},r.a.createElement("section",{className:H.a.hero},r.a.createElement(D,{title:"Fluentcards Grammar"}),r.a.createElement("div",{className:H.a.container},r.a.createElement("p",null,"Grammar drills from books and movies"),r.a.createElement(d.a,{to:"/grammar",className:H.a.cta},"Get started"))),r.a.createElement("section",null,r.a.createElement("div",{className:H.a.container},r.a.createElement("p",null,r.a.createElement(d.a,{to:"/grammar"},r.a.createElement("img",{alt:"",src:"/images/grammar.png",className:H.a.imageRight})),"To become fluent in a foreign language, one must deeply internalize its grammatical patterns.",r.a.createElement("br",null),r.a.createElement("br",null),"We dynamically generate grammar exercises from classical, sci-fi and fantasy books and movie subtitles.",r.a.createElement("br",null),r.a.createElement("br",null),"Cement your grammar knowledge with infinite grammar drills."),r.a.createElement(d.a,{to:"/grammar",className:H.a.cta},"Start doing exercises"))))},U=n(18),I=n(14),J=n.n(I),G={English:{"a-vs-the":{title:"Articles: definite vs indefinite",description:"Choose the right article.",pattern:[{partOfSpeech:"DET",baseForm:["a","an","the"],occlusion:/.+/,choices:["a","an","the"]}]},"many-vs-much":{title:"Quantifiers: many vs much, few vs little",description:"Choose the right answer.",pattern:[{partOfSpeech:"QUANT",baseForm:["little","few","much","many"],occlusion:/.+/,choices:function(e){return/little|few/.test(e.baseForm)?["little","few"]:["much","many"]}}]},"each-vs-every":{title:"Quantifiers: each vs every",description:"Choose the right answer.",pattern:[{partOfSpeech:"QUANT",baseForm:["each","every"],choices:["each","every"],occlusion:/.+/}]},"some-vs-any":{title:"Quantifiers: some vs any",description:"Choose the right answer.",pattern:[{partOfSpeech:"QUANT",baseForm:["some","any"],choices:["some","any"],occlusion:/.+/}]},"irregular-verbs":{title:"Verbs: irregular verbs",description:"Type the correct forms of the missing verbs.",pattern:[{partOfSpeech:["VPAST","VPAP"],occlusion:/.+/,choices:[],baseForm:/^(ache|be|bear|beat|become|beget|begin|bend|beseech|bet|beware|bid|bide|bind|bite|bleed|bless|blow|break|breed|bring|build|burn|burst|bust|buy|can|cast|catch|chide|choose|clad|clap|cleave|cling|clothe|come|cost|creep|crow|cut|dare|deal|dig|dive|do|dow|drag|draw|dream|dress|drink|drive|dwell|earn|eat|fall|feed|feel|fight|find|fit|flee|fling|fly|forbid|forget|forlese|forsake|freeze|get|gild|gird|give|go|grind|grow|hang|have|hear|heave|help|hew|hide|hit|hoist|hold|hurt|keep|ken|kneel|knit|know|lade|laugh|lay|lead|lean|leap|learn|leave|lend|let|lie|light|lose|make|may|mean|meet|melt|mix|mow|must|ought|pay|pen|plead|prove|put|quit|reach|read|rend|rid|ride|ring|rise|rive|run|saw|say|see|seek|seethe|sell|send|set|sew|shake|shall|shape|shave|shear|shed|shine|shit|shoe|shoot|show|shrink|shut|sing|sink|sit|slay|sleep|slide|sling|slink|slip|slit|smell|smite|sneak|sow|speak|speed|spell|spend|spill|spin|spit|split|spoil|spread|sprenge|spring|stand|starve|stave|stay|steal|stick|sting|stink|stretch|strew|stride|strike|string|strip|strive|swear|sweat|sweep|swell|swim|swing|take|teach|tear|tell|think|thrive|throw|thrust|tread|vex|wake|wax|wear|weave|wed|weep|wend|wet|will|win|wind|work|wreak|wring|write|writhe|zinc)$/}]},"third-person-singular":{title:"Verbs: third person singular",description:'Insert the verbal ending "-s" where necessary.',pattern:[{partOfSpeech:["PRON","PRONONE","PROP","NOUN"]},{partOfSpeech:["VPRES"],baseForm:/^((?!be|have|go).)/,occlusion:/s$/,choices:["","s"]}]},"phrasal-verbs":{title:"Verbs: phrasal verbs",description:"Complete the phrasal verbs with the correct preposisions.",pattern:[{partOfSpeech:["VPRES","VPAST","VPAP"],baseForm:["give","get","put","look","turn","break","call","go","make","do","bring","cut","drop","keep","run","set"]},{partOfSpeech:"PREP",baseForm:["out","up","down","back","on","off","for","over","away","after"],occlusion:/.+/}]},"modal-verbs":{title:"Verbs: modal verbs",description:"Choose the most suitable modal verb.",pattern:[{partOfSpeech:["VAUX"],surfaceForm:/^((?!will|'ll|'d).)/,occlusion:/.+/}]},"prepositions-in-on-at":{title:"Prepositions: in, on, at",description:"Choose the right preposition.",pattern:[{partOfSpeech:"PREP",baseForm:["in","on","at"],occlusion:/.+/,choices:["in","on","at"]}]}},German:{"definite-article-and-adjectives":{title:"Adjectives: weak declension",description:"Choose the right ending of the adjectives that go after a definite article.",pattern:[{partOfSpeech:"ART",baseForm:/^((?!ein).)/},{partOfSpeech:["ADJA","ADJA2","ADJA3"],surfaceForm:/.{4,}/,occlusion:/e[nrs]?$/,choices:["e","en","er","es"]},{partOfSpeech:"NOUN"}]},"indefinite-article-and-adjectives":{title:"Adjectives: mixed declension",description:'Choose the right ending of the adjectives that go after an idefinite article, "kein" or a possessive pronoun ("mein", "sein" etc).',pattern:[{partOfSpeech:["ART","INDDET","POSDET"],baseForm:/^((?!der|die|das).)/},{partOfSpeech:["ADJA","ADJA2","ADJA3"],surfaceForm:/.{4,}/,occlusion:/(e[mnrs]?)?$/,choices:["e","en","er","es","em",""]},{partOfSpeech:"NOUN"}]},"adjective-declension":{title:"Adjectives: weak, mixed and strong declensions",description:"Choose the correct endings of adjectives.",pattern:[{partOfSpeech:["ADJA","ADJA2","ADJA3"],surfaceForm:/.{4,}/,occlusion:/(e[mnrs]?)?$/,choices:["e","en","er","es","em",""]},{partOfSpeech:"NOUN"}]},"definite-article-declension":{title:"Articles: definite articles",description:"Put the articles into correct form.",pattern:[{partOfSpeech:"ART",baseForm:/^((?!ein).)/,occlusion:/.+/,choices:["der","die","das","des","den","dem"]}]},"preposition-case":{title:"Prepositional cases",description:"Choose the right form of an article after a preposition",pattern:[{partOfSpeech:"PREP"},{partOfSpeech:"ART",occlusion:/[^d]+$/,choices:["er","ie","as","es","en","em"]}]},"verbs-with-prepositions":{title:"Verbs: prepositional government",description:"Choose the preposision that is required by a verb.",pattern:[{partOfSpeech:["VVFIN","VVINF"]},{partOfSpeech:["PREP","PREPART"],occlusion:/.+/,baseForm:/^((?!da).)/,choices:["an","auf","aus","bei","f\xfcr","gegen","in","mit","nach","um","von","vor","\xfcber","zu","zur\xfcck","zusammen"]}]},"modal-verbs":{title:"Verbs: modal verbs",description:"Choose the most suitable modal verb.",pattern:[{partOfSpeech:["VMFIN","VMINF","VMPP"],occlusion:/.+/}]},"separable-verbal-prefixes":{title:"Verbs: separable prefixes",description:"Choose the right separated verbal prefix.",pattern:[{partOfSpeech:"VPREF",baseForm:/^((?!da).)/,occlusion:/.+/,choices:["ab","an","auf","aus","raus","ein","hin","hinzu","los","mit","vor","weg","zur\xfcck","durch","\xfcber","r\xfcber","um","unter","wider"]},{partOfSpeech:["SENT","CM"]}]},"verb-conjugation":{title:"Verbs: conjugation",description:"Type the correct forms of the verbs.",pattern:[{partOfSpeech:"VVFIN",occlusion:/.+/,choices:[]}]},"sein-vs-haben":{title:"Verbs: sein vs haben",description:'Choose between "sein" and "haben" to form the Perfect tense.',pattern:[{partOfSpeech:"VAFIN",surfaceForm:/^(bin|bist|ist|seid|sind|habe|hast|hat|habt|haben)$/,occlusion:/.+/},{partOfSpeech:/./},{partOfSpeech:/./},{partOfSpeech:"VVPP"}]},"personal-pronouns":{title:"Pronouns: personal",description:"Put the personal pronouns into the right form.",pattern:[{partOfSpeech:["PERSPRO"],surfaceForm:/^(mich|mir|dich|dir|ihn|ihm|ihr|uns|euch|ihnen)$/i,occlusion:/.+/,choices:function(e){switch(e.baseForm){case"ich":return["ich","mich","mir"];case"du":return["du","dich","dir"];case"es":return["es","ihm"];case"er":return["er","ihn","ihm"];case"sie":return["sie","ihr","ihnen"];case"wir":return["wir","uns"];case"ihr":return["ihr","euch"]}}}]},"possessive-pronouns-and-indefinite-article":{title:"Pronouns: possessive",description:"Choose the correct form of the possessive pronouns.",pattern:[{partOfSpeech:"POSDET",occlusion:/(e[mnrs]?)$/,choices:["e","em","en","er","es"]}]}}},L=n(11),B=n.n(L),W=function(e){var t=e.match,n=t.params.language?[t.params.language]:Object.keys(G),a=t.params.language?"":r.a.createElement("div",{className:B.a.title},r.a.createElement("span",null,"Fluentcards Grammar"),r.a.createElement("span",{className:B.a.subtitle},"drills from books and subtitles")),c=t.params.language?r.a.createElement("span",null,r.a.createElement(d.a,{to:"/grammar"},"All languages")," \u203a ",t.params.language):"",s=n.map(function(e){var t=Object.keys(G[e]).map(function(t,n){return r.a.createElement("li",{key:n},r.a.createElement(d.a,{to:"/grammar/quiz/".concat(e,"/").concat(t)},G[e][t].title))});return r.a.createElement("div",{className:B.a.languageBlock,key:e,id:e},r.a.createElement("h2",null,r.a.createElement(d.a,{to:"/grammar/quiz/".concat(e)},r.a.createElement("h2",null,e))),r.a.createElement("ul",null,t))}),o=J()(B.a.home,Object(U.a)({},B.a.singleLang,t.params.language));return r.a.createElement("div",{className:o},r.a.createElement("section",null,r.a.createElement(D,{title:a},c)),r.a.createElement("section",null,r.a.createElement("div",{className:B.a.container},r.a.createElement("div",{className:B.a.content},s))),r.a.createElement("section",null,r.a.createElement("div",{className:B.a.container},r.a.createElement("h1",{className:B.a.hero},"Refresh any quiz page to load new exercises!"),r.a.createElement("p",null,"All ",r.a.createElement(d.a,{to:"/grammar/texts"},"texts")," used here are transformed and mixed for educational purposes under the Fair Use."))))},$=n(15),K=n(27),X=n.n(K),Y=function(){return r.a.createElement("div",{className:X.a.loader})};function Z(e){return Math.floor(Math.random()*e)}function ee(e){for(var t=e.length,n=t-1;n>=0;n--){var a=Z(t),r=[e[a],e[n]];e[n]=r[0],e[a]=r[1]}return e}function te(e){return e.replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/./g,"[$&]")}var ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"English";Object(l.a)(this,e),this.clozeSymbol="\u29fc\u2026\u29fd",this.language=t,this.data=null}return Object(u.a)(e,[{key:"getData",value:function(){return this.data?Promise.resolve(this.data):fetch("/data/".concat(this.language,"/tagged.json")).then(function(e){return e.json()})}},{key:"isLexemeMathing",value:function(e,t){return["partOfSpeech","baseForm","surfaceForm"].every(function(n){var a=e[n];return a instanceof Array&&(a=a.join("")),!t[n]||t[n]===a||t[n]instanceof Array&&t[n].includes(a)||t[n]instanceof RegExp&&t[n].test(a)})}},{key:"filterSentences",value:function(e,t){var n=this,a=[];return e.sentences.forEach(function(e){var r=[];e.lexemes.forEach(function(c){var s=t[r.length];n.isLexemeMathing(c,s)?r.push({lexeme:c,patternPart:s}):r=[],r.length===t.length&&(a.push({sentence:e,captured:r}),r=[])})}),a}},{key:"createExercise",value:function(e){var t,n=this,a=e.sentence.text,r=e.sentence.lexemes.map(function(t){var a=Object.assign({},t),r=e.captured.find(function(e){return e.lexeme===t});return r&&r.patternPart.occlusion&&(a.clozeForm=t.surfaceForm.replace(r.patternPart.occlusion,function(e){return a.occluded=e,n.clozeSymbol}),null==a.occluded&&(a.occluded="",a.clozeForm=a.surfaceForm+n.clozeSymbol),a.choices=r.patternPart.choices),a}),c=r.filter(function(e){return null!=e.occluded}),s=(t=c)[Z(t.length)],o=r.indexOf(s),i=r[o+1],l=r[o-1],u=new RegExp((l?"(".concat(te(l.surfaceForm),"\\s*)"):"(^)")+te(s.surfaceForm)+(i?"(?=\\s*".concat(te(i.surfaceForm),")"):"$"));return{text:a=a.replace(u,"$1"+s.clozeForm),originalText:e.sentence.text,cloze:s}}},{key:"generate",value:function(e){var t=this;return this.getData().then(function(n){return t.filterSentences(n,e)})}}]),e}(),ae=n(8),re=n.n(ae),ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={choices:null,selectedChoice:null,correct:null,showHint:!1},e.input=null,e.onInput=function(){!1===e.state.correct&&e.setState({correct:null})},e.onSubmit=function(t){t.preventDefault(),e.onAnswer(t.target.answer.value)},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.updateChoices(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.text!==this.props.text&&this.updateChoices(e)}},{key:"updateChoices",value:function(e){var t=e.cloze.occluded.toLowerCase(),n=e.cloze.choices||e.choices;n instanceof Function&&(n=n(e.cloze)),(n=ee(n.slice()).slice(0,4)).map(function(e){return e.toLowerCase()}).includes(t)||(n.length<4?(n.push(t),n=ee(n)):n[Math.floor(n.length*Math.random())]=t),this.setState({choices:n,correct:null,selectedChoice:null,showHint:!1})}},{key:"onAnswer",value:function(e){var t=this,n=this.props.cloze,a=n.occluded.toLowerCase()===e.toLowerCase();this.setState({correct:a,selectedChoice:e}),this.props.onAnswer(a,n),!a&&setTimeout(function(){t.setState({showHint:!0})},600)}},{key:"renderChoices",value:function(){var e=this,t=this.state,n=t.choices,a=t.correct,c=t.showHint;if(!n||n.length<=1)return null;var s=this.props.cloze.occluded;return n.map(function(t,n){var o=e.state.selectedChoice===t,i={};return i[re.a.selectedChoice]=o,i[re.a.correctChoice]=o&&a,i[re.a.incorrectChoice]=o&&!a,i[re.a.hintChoice]=c&&t===s,r.a.createElement("li",{key:n},r.a.createElement("button",{className:J()(re.a.choiceButton,i),disabled:null!=e.state.selectedChoice,onClick:function(){return e.onAnswer(t)}},t||"\u2205"))})}},{key:"componentDidUpdate",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var e=this,t=this.props.cloze,n=this.state,a=n.correct,c=n.showHint,s=this.props.cloze.occluded,o=this.renderChoices(),i=o?r.a.createElement("ol",{className:re.a.choices},o):"",l=o?"\u2026":t.baseForm.join?t.baseForm.join(""):t.baseForm,u=c&&!o?r.a.createElement("span",{className:re.a.hintAnswer},s):null,h=r.a.createElement("form",{action:"#",onSubmit:this.onSubmit},u,r.a.createElement("input",{ref:function(t){return e.input=t},name:"answer",autoFocus:!0,disabled:!1===a,placeholder:l,size:this.props.size+1,readOnly:a,onInput:this.onInput,defaultValue:a||c&&o?s:null})),m=this.props.text.split(this.props.clozeSymbol,2);m[0]=m[0].slice(0,1).toUpperCase()+m[0].slice(1);var p={};p[re.a.correct]=!0===a,p[re.a.incorrect]=!1===a;var d=J()(re.a.container,p);return r.a.createElement("div",{className:d},r.a.createElement("div",{className:re.a.question},m[0],h,m[1]),i)}}]),t}(r.a.PureComponent),se=n(12),oe=n.n(se),ie=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).generator=null,e.allExercises=null,e.cachedExercises=null,e._onAnswer=e.onAnswer.bind(Object($.a)(Object($.a)(e))),e._onReloadClick=e.reload.bind(Object($.a)(Object($.a)(e))),e.state={currentExercises:[],activeExercise:0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"init",value:function(){var e=this;this.generator=new ne(this.props.language),this.generator.generate(this.props.pattern).then(function(t){e.cachedExercises=t,e.allExercises=t.slice(),e.reload()})}},{key:"onAnswer",value:function(e){var t=this;S.update(this.props.language,this.props.patternSlug,e);var n=this.state.activeExercise;setTimeout(function(){t.setState({activeExercise:n+1})},e?600:3e3)}},{key:"reload",value:function(){var e=this;this.setState({currentExercises:[],activeExercise:0});for(var t=[],n=function(n){var a=Math.floor(Math.random()*e.allExercises.length),r=e.allExercises[a];t.some(function(e){return e.originalText===r.sentence.text})||(t.push(e.generator.createExercise(r)),e.allExercises.splice(a,1),e.allExercises.length<v-t.length&&(e.allExercises=e.cachedExercises.slice()))},a=0;a<100&&t.length<v;a++)n();setTimeout(function(){e.setState({currentExercises:t})},100)}},{key:"componentWillMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){S.reset()}},{key:"componentWillReceiveProps",value:function(e){this.props.pattern!==e.pattern&&this.init()}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentExercises,a=t.activeExercise,c=n.reduce(function(e,t){return Math.max(e,t.cloze.occluded.length)},1),s=n.reduce(function(e,t){var n=t.cloze.occluded.toLowerCase();return e.includes(n)||e.push(n),e},[]),o=n.map(function(t,n){var o=J()(oe.a.question,Object(U.a)({},oe.a.activeQuestion,n===a));return r.a.createElement("li",{key:n,className:o},r.a.createElement(ce,{cloze:t.cloze,text:t.text,size:c,choices:s,clozeSymbol:e.generator.clozeSymbol,onAnswer:e._onAnswer}))}),i=a===n.length?r.a.createElement("div",{className:oe.a.results},r.a.createElement("p",{className:oe.a.congrats},"Great job!"),r.a.createElement("div",{className:oe.a.controls},r.a.createElement("button",{onClick:this._onReloadClick},"Load new exercises")),r.a.createElement("div",null,r.a.createElement("i",null,"or"),r.a.createElement("p",null,r.a.createElement(d.a,{to:"/grammar/quiz/".concat(this.props.language)},"Choose another exercise")))):r.a.createElement("div",null,r.a.createElement("p",{className:oe.a.description},this.props.description),r.a.createElement("ol",{className:oe.a.list},o)),l=n.length?i:r.a.createElement(Y,null);return r.a.createElement("div",{className:oe.a.container},l)}}]),t}(r.a.PureComponent),le=n(28),ue=n.n(le),he=function(e){var t=e.match,n=G[t.params.language][t.params.pattern];if(!n){try{n=JSON.parse(atob(t.params.pattern))}catch(a){return null}n.pattern.forEach(function(e){Object.keys(e).forEach(function(t){"choices"!==t&&(e[t]=new RegExp(e[t]))})}),n.pattern.some(function(e){return e.occlusion})||(n.pattern[0].occlusion=/.+/)}return r.a.createElement("div",null,r.a.createElement(D,{title:n.title},r.a.createElement(d.a,{to:"/grammar/quiz/".concat(t.params.language)},t.params.language)," \u203a "),r.a.createElement("div",{className:ue.a.container},r.a.createElement(ie,{language:t.params.language,description:n.description,pattern:n.pattern,patternSlug:t.params.pattern})))},me=n(29),pe=n.n(me),de=function(){return r.a.createElement("div",null,r.a.createElement(D,{title:""},r.a.createElement(d.a,{to:"/grammar"},"Fluentcards Grammar")),r.a.createElement("div",{className:pe.a.container},r.a.createElement("h2",null,"Source texts"),r.a.createElement("p",null,"The following texts have been used to create the grammar exercises:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Br\xfcder Grimm,",r.a.createElement("span",null," "),r.a.createElement("a",{href:"http://gutenberg.spiegel.de/buch/die-schonsten-kinder-und-hausmarchen-6248/1"},"Die sch\xf6nsten Kinder- und Hausm\xe4rchen")),r.a.createElement("li",null,"Johanna Spyri,",r.a.createElement("span",null," "),r.a.createElement("a",{href:"http://gutenberg.spiegel.de/buch/heidis-lehr-und-wanderjahre-5611/1"},"Heidis Lehr- und Wanderjahre")),r.a.createElement("li",null,"Franz Kafka,",r.a.createElement("span",null," "),r.a.createElement("a",{href:"http://gutenberg.spiegel.de/buch/franz-kafka-erz-161/1"},"26 Erz\xe4hlungen")),r.a.createElement("li",null,"H. G. Wells,",r.a.createElement("span",null," "),r.a.createElement("a",{href:"https://www.gutenberg.org/ebooks/35"},"The Time Machine")),r.a.createElement("li",null,"The subtitles for \u201cThe Avengers\u201d (2003) from Opensubtitles.org"),r.a.createElement("li",null,"The subtitles for \u201cThe Guardians of the Galaxy\u201d (2014) from Opensubtitles.org"))))},fe=(n(52),function(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement(i.a,{exact:!0,path:"/",component:M}),r.a.createElement(i.a,{exact:!0,path:"/grammar",component:W}),r.a.createElement(i.a,{exact:!0,path:"/grammar/texts",component:de}),r.a.createElement(i.a,{exact:!0,path:"/grammar/quiz/:language",component:W}),r.a.createElement(i.a,{path:"/grammar/quiz/:language/:pattern",component:he}),r.a.createElement(T,null)))});s.a.render(r.a.createElement(fe),document.querySelector("#app-root"))},8:function(e,t,n){e.exports={container:"Question_container__306_4","fade-in":"Question_fade-in__2soT7",correct:"Question_correct__30U5R",incorrect:"Question_incorrect__v_YsN",shake:"Question_shake__1GNR-",question:"Question_question__2Sro2",choices:"Question_choices__1H9BH",choiceButton:"Question_choiceButton__2GIex",selectedChoice:"Question_selectedChoice__17cTy",correctChoice:"Question_correctChoice__8b1Yn",hintChoice:"Question_hintChoice__1yYr9",incorrectChoice:"Question_incorrectChoice__3pRUh"}}},[[31,2,1]]]);
//# sourceMappingURL=main.34de2f41.chunk.js.map